{"version":3,"sources":["webpack://@kater/gamification-extend/webpack/bootstrap","webpack://@kater/gamification-extend/external \"flarum.core.compat['forum/app']\"","webpack://@kater/gamification-extend/./node_modules/dayjs/dayjs.min.js","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/extend']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@kater/gamification-extend/./node_modules/dayjs/plugin/relativeTime.js","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/utils/classList']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/Model']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/models/Post']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/components/Button']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/components/Modal']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/helpers/avatar']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/helpers/username']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/components/Link']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/helpers/fullTime']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['forum/components/PostMeta']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/components/UserCard']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['common/helpers/icon']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['forum/components/UserPage']\"","webpack://@kater/gamification-extend/external \"flarum.core.compat['forum/components/PostsUserPage']\"","webpack://@kater/gamification-extend/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@kater/gamification-extend/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@kater/gamification-extend/./src/forum/components/VotesModal.js","webpack://@kater/gamification-extend/./src/forum/helpers/setting.js","webpack://@kater/gamification-extend/./src/forum/extendPostVoteButtons.js","webpack://@kater/gamification-extend/./src/forum/helpers/saveVote.js","webpack://@kater/gamification-extend/./src/forum/helpers/humanTime.tsx","webpack://@kater/gamification-extend/./src/forum/utils/humanTime.ts","webpack://@kater/gamification-extend/./src/forum/components/NewPostMeta.js","webpack://@kater/gamification-extend/./src/forum/components/NewVotesUserPage.js","webpack://@kater/gamification-extend/./src/forum/index.js","webpack://@kater/gamification-extend/./src/forum/extendPostHeader.js","webpack://@kater/gamification-extend/./src/forum/changeUserCardVote.js","webpack://@kater/gamification-extend/./src/forum/removeUpvoteTabToUserProfile.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","e","u","a","f","h","$","y","M","weekdays","split","months","String","length","Array","join","g","z","utcOffset","Math","abs","floor","date","year","month","clone","add","ceil","w","D","ms","Q","toLowerCase","replace","v","_","S","args","arguments","O","locale","$L","utc","$u","x","$x","$offset","this","parse","$d","Date","NaN","test","match","substring","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","apply","slice","$locale","weekStart","$set","min","daysInMonth","Number","round","subtract","format","invalidDate","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","T","forEach","extend","$i","isDayjs","en","Ls","future","past","yy","fromToBase","relativeTime","thresholds","rounding","to","from","toNow","fromNow","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","VotesModal","className","title","app","translator","trans","oninit","vnode","showTypes","attrs","loading","post","upvotes","downvotes","load","content","map","type","voters","user","href","route","avatar","username","store","find","id","include","then","loaded","Modal","isBool","val","data","parseInt","CommentPost","items","has","hasDownvoted","hasUpvoted","icon","setting","upVotesOnly","canSeeVotes","canVote","session","onclick","upvoted","downvoted","discussion","redraw","save","pushAttributes","votes","DiscussionControls","replyAction","saveVote","voteLoading","new_vote","classList","Button","component","undefined","disabled","modal","show","upvotes_sum","downvotes_sum","setContent","humanTime","time","dayjs","datetime","full","ago","now","humanTimeUtil","pubdate","data-humantime","ordinal","formats","LT","LTS","L","LL","LLL","LLLL","ll","lll","llll","NewPostMeta","view","createdAt","permalink","getPermalink","touch","document","documentElement","setTimeout","parent","select","data-toggle","number","fullTime","attributes","ipAddress","stopPropagation","PostMeta","NewVotesUserPage","loadResults","offset","Promise","resolve","PostsUserPage","initializers","Post","Model","attribute","extendPostVoteButtons","UserCard","style","color","count","points","routes","path","UserPage","remove"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","module.exports = flarum.core.compat['forum/app'];","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},v=\"en\",D={};D[v]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return v;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(v=i),i||!r&&v},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var v=this.$locale().weekStart||0,D=(y<v?y+7:y)-v;return $(r?m-D:m+(6-D),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,v=O.m(this,M);return v=(l={},l[c]=v/12,l[f]=v,l[h]=v/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?v:O.a(v)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[v],w.Ls=D,w.p={},w}));","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","!function(r,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(r=\"undefined\"!=typeof globalThis?globalThis:r||self).dayjs_plugin_relativeTime=e()}(this,(function(){\"use strict\";return function(r,e,t){r=r||{};var n=e.prototype,o={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};function i(r,e,t,o){return n.fromToBase(r,e,t,o)}t.en.relativeTime=o,n.fromToBase=function(e,n,i,d,u){for(var f,a,s,l=i.$locale().relativeTime||o,h=r.thresholds||[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],m=h.length,c=0;c<m;c+=1){var y=h[c];y.d&&(f=d?t(e).diff(i,y.d,!0):i.diff(e,y.d,!0));var p=(r.rounding||Math.round)(Math.abs(f));if(s=f>0,p<=y.r||!y.r){p<=1&&c>0&&(y=h[c-1]);var v=l[y.l];u&&(p=u(\"\"+p)),a=\"string\"==typeof v?v.replace(\"%d\",p):v(p,n,y.l,s);break}}if(n)return a;var M=s?l.future:l.past;return\"function\"==typeof M?M(a):M.replace(\"%s\",a)},n.to=function(r,e){return i(r,e,this,!0)},n.from=function(r,e){return i(r,e,this)};var d=function(r){return r.$u?t.utc():t()};n.toNow=function(r){return this.to(d(this),r)},n.fromNow=function(r){return this.from(d(this),r)}}}));","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/models/Post'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/helpers/avatar'];","module.exports = flarum.core.compat['common/helpers/username'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","module.exports = flarum.core.compat['common/helpers/fullTime'];","module.exports = flarum.core.compat['forum/components/PostMeta'];","module.exports = flarum.core.compat['common/components/UserCard'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['forum/components/UserPage'];","module.exports = flarum.core.compat['forum/components/PostsUserPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\n\nexport default class VotesModal extends Modal {\n    className() {\n        return 'VotesModal Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('fof-gamification.forum.modal.title');\n    }\n\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        // 传入要显示的 ['upvotes', 'downvotes']\n        this.showTypes = this.attrs.showTypes || []\n        this.loading = !this.attrs.post.upvotes() || !this.attrs.post.downvotes();\n\n\n        if (this.loading) {\n            this.load();\n        }\n\n    }\n\n    content() {\n        if (this.loading) {\n            return (\n                <div className=\"Modal-body\">\n                    <LoadingIndicator />\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"Modal-body\">\n                <ul className=\"VotesModal-list\">\n                    {this.showTypes.map((type) => {\n                        const voters = this.attrs.post[type]();\n\n                        if (!voters || !voters.length) return;\n\n                        return (\n                            <div>\n                                <legend>{app.translator.trans(`fof-gamification.forum.modal.${type}_label`)}</legend>\n                                {voters.map((user) => (\n                                    <li>\n                                        <Link href={app.route.user(user)}>\n                                            {avatar(user)} {username(user)}\n                                        </Link>\n                                    </li>\n                                ))}\n                            </div>\n                        );\n                    })}\n                </ul>\n            </div>\n        );\n    }\n\n    load() {\n        return app.store\n            .find('posts', this.attrs.post.id(), {\n                include: 'upvotes,downvotes',\n            })\n            .then(this.loaded.bind(this))\n        // .then(m.redraw());\n    }\n}\n","import app from 'flarum/forum/app';\n\nexport default (key, isBool = false) => {\n  const val = app.data[`fof-gamification.${key}`];\n\n  if (isBool) {\n    return !!parseInt(val);\n  }\n\n  return val;\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport classList from 'flarum/common/utils/classList';\nimport Button from 'flarum/common/components/Button';\n\n\n/** 显示弹出榜 */\nimport VotesModal from './components/VotesModal';\nimport saveVote from './helpers/saveVote';\nimport setting from './helpers/setting';\n\nexport default function () {\n\n  /***\n    * Post Votes 分化 赞 踩 显示\n    */\n  extend(CommentPost.prototype, 'actionItems', function (items) {\n\n    if (items.has(\"votes\")) {\n\n      // 直接重写\n      const post = this.attrs.post;\n\n      //if (!post.canVote()) return;\n\n      const hasDownvoted = post.hasDownvoted();\n      const hasUpvoted = post.hasUpvoted();\n\n      const icon = setting('iconName') || 'thumbs';\n      const upVotesOnly = setting('upVotesOnly', true);\n\n      const canSeeVotes = post.canSeeVotes();\n\n      // We set canVote to true for guest users so that they can access the login by clicking the button\n      const canVote = !app.session.user || post.canVote();\n\n      const onclick = (upvoted, downvoted) => saveVote(post, upvoted, downvoted, (val) => (this.voteLoading = val));\n\n      const new_vote = <div className={classList('CommentPost-votes', setting('useAlternateLayout', true) && 'alternateLayout')}>\n        {Button.component({\n          icon: this.voteLoading ? undefined : `fas fa-fw fa-${icon}-up`,\n          className: classList('Post-vote Post-upvote', hasUpvoted && 'Post-vote--active'),\n          loading: this.voteLoading,\n          disabled: this.voteLoading || !canVote || !canSeeVotes,\n          onclick: () => onclick(!hasUpvoted, false),\n          'aria-label': app.translator.trans('fof-gamification.forum.post.upvote_button'),\n        }, app.translator.trans('kater-gamificationextend.forum.votes.up'))}\n\n        <label\n          className=\"Post-points\"\n          onclick={() => app.modal.show(VotesModal, { post, showTypes: ['upvotes'] })}\n        >\n          {parseInt(post.upvotes_sum()) < 1 ? \"-\" : post.upvotes_sum()}\n        </label>\n\n        {\n          !upVotesOnly &&\n          Button.component({\n            icon: this.voteLoading ? undefined : `fas fa-fw fa-${icon}-down`,\n            className: classList('Post-vote Post-downvote', hasDownvoted && 'Post-vote--active'),\n            loading: this.voteLoading,\n            disabled: !canVote || !canSeeVotes,\n            onclick: () => onclick(false, !hasDownvoted),\n            'aria-label': app.translator.trans('fof-gamification.forum.post.downvote_button'),\n          }, app.translator.trans('kater-gamificationextend.forum.votes.down'))\n\n        }\n\n        {!upVotesOnly &&\n          <label\n            className=\"Post-points\"\n            onclick={() => app.modal.show(VotesModal, { post, showTypes: ['downvotes'] })}\n          >\n            {parseInt(post.downvotes_sum()) < 6 ? \"-\" : post.downvotes_sum()}\n          </label>\n        }\n      </div >\n\n      items.setContent(\"votes\", new_vote)\n\n\n\n\n\n\n\n\n      // let votes = items.get(\"votes\")\n\n      // votes.children[1] = m(\"label\", {\n      //   className: \"Post-points\",\n      //   onclick: () => {\n      //     app.modal.show(VotesModal, { post, showTypes: ['upvotes'] })\n      //   }\n      // }, post.upvotes_sum())\n\n      // // votes.children[2].children[1].text = \"嘘\"\n      // votes.children[3] = m(\"label\", {\n      //   className: \"Post-points\",\n      //   onclick: () => {\n      //     app.modal.show(VotesModal, { post, showTypes: ['downvotes'] })\n      //   }\n      // }, parseInt(post.downvotes_sum()) < 6 ? \"-\" : post.downvotes_sum())\n\n\n    }\n\n  })\n\n}\n","import app from 'flarum/forum/app';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\n\nexport default (post, upvoted, downvoted, load, discussion = post.discussion()) => {\n  if (!app.session.user) {\n    // We use this instead of showing LogInModal so that extensions can override it\n    DiscussionControls.replyAction.call(discussion, true);\n    return;\n  } else if (discussion && !discussion.canVote() && !post.canVote()) {\n    return;\n  }\n\n  if (upvoted && downvoted) {\n    upvoted = false;\n    downvoted = false;\n  }\n\n  if (load) load(true);\n\n  m.redraw();\n\n  return post\n    .save([upvoted, downvoted, 'vote'])\n    .then(\n      () => null,\n      () => null\n    )\n    .then(() => {\n      if (load) load(false);\n\n      if (discussion) {\n        discussion.pushAttributes({\n          votes: post.votes(),\n        });\n      }\n\n      m.redraw();\n    });\n};\n","import dayjs from 'dayjs';\nimport type Mithril from 'mithril';\nimport humanTimeUtil from '../utils/humanTime';\n\nimport relativeTime from 'dayjs/plugin/relativeTime'\ndayjs.extend(relativeTime)\n\n/**\n * The `humanTime` helper displays a time in a human-friendly time-ago format\n * (e.g. '12 days ago'), wrapped in a <time> tag with other information about\n * the time.\n */\nexport default function humanTime(time: Date): Mithril.Vnode {\n  const d = dayjs(time);\n\n  const datetime = d.format();\n  const full = d.format('YYYY年M月D日dddd HH:mm');\n  const ago = humanTimeUtil(time);\n\n  const day = 864e5;\n  const diff = d.diff(dayjs());\n\n  if (diff < -30 * day) {\n    // ago = d.format('MMM D日');\n    return (\n      <time pubdate datetime={datetime} title={full}>\n        {ago}\n      </time>\n    );\n  } else {\n    return (\n      <time pubdate datetime={datetime} title={full} data-humantime>\n        {ago}\n      </time>\n    );\n  }\n\n\n}\n","import dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime'\ndayjs.extend(relativeTime)\n\ndayjs.locale({\n    name: 'zh-tw',\n    weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),\n    weekdaysShort: '週日_週一_週二_週三_週四_週五_週六'.split('_'),\n    weekdaysMin: '日_一_二_三_四_五_六'.split('_'),\n    months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),\n    monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),\n    ordinal: n => `${n}日`,\n    formats: {\n        LT: 'HH:mm',\n        LTS: 'HH:mm:ss',\n        L: 'YYYY/MM/DD',\n        LL: 'YYYY年M月D日',\n        LLL: 'YYYY年M月D日 HH:mm',\n        LLLL: 'YYYY年M月D日dddd HH:mm',\n        l: 'YYYY/M/D',\n        ll: 'YYYY年M月D日',\n        lll: 'YYYY年M月D日 HH:mm',\n        llll: 'YYYY年M月D日dddd HH:mm'\n    },\n    relativeTime: {\n        future: '%s內',\n        past: '%s前',\n        s: '幾秒',\n        m: '1 分鐘',\n        mm: '%d 分鐘',\n        h: '1 小時',\n        hh: '%d 小時',\n        d: '1 天',\n        dd: '%d 天',\n        M: '1 個月',\n        MM: '%d 個月',\n        y: '1 年',\n        yy: '%d 年'\n    }\n});\n\n/**\n * The `humanTime` utility converts a date to a localized, human-readable time-\n * ago string.\n */\nexport default function humanTime(time: dayjs.ConfigType): string {\n    let d = dayjs(time);\n    const now = dayjs();\n\n    // To prevent showing things like \"in a few seconds\" due to small offsets\n    // between client and server time, we always reset future dates to the\n    // current time. This will result in \"just now\" being shown instead.\n    if (d.isAfter(now)) {\n        d = now;\n    }\n\n    const day = 864e5;\n    const diff = d.diff(dayjs());\n    let ago: string;\n\n    // If this date was more than a month ago, we'll show the name of the month\n    // in the string. If it wasn't this year, we'll show the year as well.\n    //   if (diff < -30 * day) {\n    //     if (d.year() === dayjs().year()) {\n    //       ago = d.format('D MMM');\n    //     } else {\n    //       ago = d.format('ll');\n    //     }\n    //   } else {\n    //     ago = d.fromNow();\n    //   }\n\n    if (diff < -30 * day) {\n        // ago = d.format('MMM D日');\n        ago = d.format('YYYY年M月D日  HH:mm')\n    } else {\n        ago = d.fromNow();\n    }\n\n    return ago;\n}\n","import app from 'flarum/forum/app';\nimport humanTime from '../helpers/humanTime';\nimport fullTime from 'flarum/common/helpers/fullTime';\nimport PostMeta from 'flarum/forum/components/PostMeta';\n\nexport default class NewPostMeta extends PostMeta{\n  view() {\n    const post = this.attrs.post;\n    const time = post.createdAt();\n    const permalink = this.getPermalink(post);\n    const touch = 'ontouchstart' in document.documentElement;\n\n    // When the dropdown menu is shown, select the contents of the permalink\n    // input so that the user can quickly copy the URL.\n    const selectPermalink = function (e) {\n      setTimeout(() => $(this).parent().find('.PostMeta-permalink').select());\n\n      e.redraw = false;\n    };\n\n    return (\n      <div className=\"Dropdown PostMeta\">\n        <a className=\"Dropdown-toggle\" onclick={selectPermalink} data-toggle=\"dropdown\">\n          {humanTime(time)}\n        </a>\n\n        <div className=\"Dropdown-menu dropdown-menu\">\n          <span className=\"PostMeta-number\">{app.translator.trans('core.forum.post.number_tooltip', { number: post.number() })}</span>{' '}\n          <span className=\"PostMeta-time\">{fullTime(time)}</span> <span className=\"PostMeta-ip\">{post.data.attributes.ipAddress}</span>\n          {touch ? (\n            <a className=\"Button PostMeta-permalink\" href={permalink}>\n              {permalink}\n            </a>\n          ) : (\n            <input className=\"FormControl PostMeta-permalink\" value={permalink} onclick={(e) => e.stopPropagation()} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n\n","import app from 'flarum/forum/app';\nimport PostsUserPage from 'flarum/forum/components/PostsUserPage';\n\n/**\n * The `VotesUserPage` component shows posts which user voted on.\n */\nexport default class NewVotesUserPage extends PostsUserPage {\n    /**\n     * Load a new page of the user's activity feed.\n     *\n     * @param offset The position to start getting results from.\n     * @protected\n     */\n    loadResults(offset) {\n        return Promise.resolve([])\n    }\n}\n","import app from 'flarum/forum/app';\r\n\r\nimport Model from 'flarum/common/Model';\r\nimport Post from 'flarum/common/models/Post';\r\n\r\nimport extendPostVoteButtons from \"./extendPostVoteButtons\"\r\nimport extendPostHeader from \"./extendPostHeader\"\r\nimport changeUserCardVote from \"./changeUserCardVote\"\r\nimport removeUpvoteTabToUserProfile from './removeUpvoteTabToUserProfile'\r\n\r\n\r\n/**\r\n *  小 Bug 在不改动源码的情况下 无法避免  \r\n *  PostMeta 若在很接近 30天内时 时间自动刷新\r\n *  有可能从 30天前 => 5 6月   期望为 2022 6月5日 xxx xx:xx:xx \r\n * */\r\n\r\n\r\napp.initializers.add('kater/gamificationextend', () => {\r\n  Post.prototype.upvotes_sum = Model.attribute('upvotes_sum');\r\n  Post.prototype.downvotes_sum = Model.attribute('downvotes_sum');\r\n\r\n  /** 重写 Vote部分 */\r\n  extendPostVoteButtons()\r\n\r\n  /** 新增楼层显示 */\r\n  extendPostHeader()\r\n\r\n  /** 修改 UserCard Vote 显示  */\r\n  changeUserCardVote()\r\n\r\n  /** 清理  u/:username/votes */\r\n  removeUpvoteTabToUserProfile()\r\n}, -10);\r\n\r\n\r\n\r\n","import { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport NewPostMeta from './components/NewPostMeta';\n\n\nexport default function () {\n\n    extend(CommentPost.prototype, 'headerItems', function (items) {\n        const post = this.attrs.post;\n        /** Post 增加 楼层显示 */\n        items.add('louceng', m(\"div\", post.number() + app.translator.trans('kater-gamificationextend.forum.louceng')));\n\n        /** 对 PostMeta 进行替换 */\n        if (items.has('meta')) {\n            items.setContent(\"meta\", NewPostMeta.component({ post }))\n        }\n    });\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserCard from \"flarum/common/components/UserCard\"\nimport icon from 'flarum/common/helpers/icon';\n\nexport default function () {\n    extend(UserCard.prototype, 'infoItems', function (items) {\n        const user = this.attrs.user;\n        // 替换\n        items.setContent(\n            'points',\n            <div>\n                {icon('fas fa-thumbs-up', { style: { color: \"gold\" } })}\n                {app.translator.trans('fof-gamification.forum.user.card.points', {\n                    count: user.points(),\n                })}\n            </div>,\n            50\n        );\n    });\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\n\nimport NewVotesUserPage from './components/NewVotesUserPage';\n\n\nexport default function removeUpvoteTabToUserProfile() {\n\n    if (app.routes['user.votes']) {\n        // 覆盖路径\n        app.routes['user.votes'] = { path: '/u/:username/votes', component: NewVotesUserPage };\n    }\n\n    extend(UserPage.prototype, 'navItems', function (items) {\n        if (items.has('votes')) {\n            items.remove('votes')\n        }\n    });\n}\n"],"sourceRoot":""}